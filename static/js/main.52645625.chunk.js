(this["webpackJsonpsnake-ml-experiment"]=this["webpackJsonpsnake-ml-experiment"]||[]).push([[0],{27:function(e,t,a){e.exports=a(40)},28:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);a(28);var n,r=a(0),c=a.n(r),i=a(18),o=a(4),s=a(1),l=a(3),u=a(20),d=a(21),h=a(22);!function(e){e[e.ready=0]="ready",e[e.running=1]="running",e[e.pause=2]="pause",e[e.gameOver=3]="gameOver"}(n||(n={}));var b,f,m="rgb(10, 232, 10)";!function(e){e.empty="empty",e.wall="wall",e.food="food",e.snake="snake"}(b||(b={})),function(e){e[e.Right=0]="Right",e[e.Down=90]="Down",e[e.Left=180]="Left",e[e.Up=270]="Up"}(f||(f={}));var p,g,k,v,O,j,y,x=a(5),w=a(6),E=a(7),C=a(9),S=a(8),D=a(10),N=a(14),T=a.n(N),F=a(25),L=a(15),z=a(26),R=a(23),A=a(11),I=function(){function e(){Object(R.a)(this,e),this.defaultState={cells:[]},this.localState=this.defaultState}return Object(A.a)(e,[{key:"reduceForward",value:function(e){throw new Error("Must be implemented!")}},{key:"reduceBackward",value:function(e){return e}},{key:"reducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultState,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!a&&t&&(this.localState=this.reduceForward(e)),a||t?Object(z.a)({},e,{},this.localState,{cells:[].concat(Object(L.a)(e.cells),Object(L.a)(this.localState.cells))}):this.reduceBackward(e)}},{key:"random",value:function(e){return Math.floor(Math.random()*e)}},{key:"indexToCoordinate",value:function(e,t){return[Math.trunc(e/t),Math.trunc(e%t)]}},{key:"secondsFromUnixEpoch",value:function(){return Date.now()/1e3}},{key:"randomCoordinate",value:function(e){return[this.random(e),this.random(e)]}},{key:"findCellsByCoord",value:function(e,t){var a=Object(F.a)(t,2),n=a[0],r=a[1];return e.filter((function(e){var t=e.coordinate;e.type;return t[0]===n&&t[1]===r}))}}]),e}(),M=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(C.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).stepsLeftToDecreaseLength=10,a.stepsForEachFood=10,a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"step",value:function(e){this.collision(e)||this.collisionOthers(e)||this.tastyFood(e)||this.looseLength(e)||this.usualStepForward(e)}},{key:"looseLength",value:function(e){return this.stepsLeftToDecreaseLength--,0===this.stepsLeftToDecreaseLength&&(this.snake.length>=2?(this.stepsLeftToDecreaseLength=this.stepsForEachFood,this.snake=[this.getNextCoord()].concat(Object(x.a)(this.snake.slice(0,this.snake.length-2))),!0):this._died=!0)}},{key:"tastyFood",value:function(e){var t=this.getNextCoord(),a=this.nextCell(e);return(null===a||void 0===a?void 0:a.type)===b.food&&(this.stepsLeftToDecreaseLength=this.stepsForEachFood,this.snake=[t].concat(Object(x.a)(this.snake)),!0)}},{key:"stepsLeft",get:function(){return(this.snake.length-1)*this.stepsForEachFood+this.stepsLeftToDecreaseLength}}]),t}(function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(C.a)(this,Object(S.a)(t).call(this)))._name=void 0,a._died=!1,a.color=void 0,a.snake=void 0,a.currentDegree=void 0,a.nextDegree=void 0,a.steps=-1,a.tableSize=void 0,a._name=e.name||"Unknown snake",a.color=e.color||"rgb(239, 27, 232)",a.snake=e.snake,a.currentDegree=e.direction||0,a.nextDegree=a.currentDegree,a.tableSize=e.tableSize||100,a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"reduceForward",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a||this._died||(this.steps>=0&&this.step(e.cells),this.steps++),{cells:this.snake.map((function(e,a){return{coordinate:e,type:b.snake,color:t.colorful(a)}}))}}},{key:"colorful",value:function(e){return 0===e?this.color:T()(this.color).saturate(e).darken(2*(e/this.snake.length-1)).hex()}},{key:"step",value:function(e){this.collision(e)||this.collisionOthers(e)||this.tastyFood(e)||this.usualStepForward(e)}},{key:"nextCell",value:function(e){var t=this.getNextCoord(),a=Object(o.a)(t,2),n=a[0],r=a[1];return e.find((function(e){var t=Object(o.a)(e.coordinate,2),a=t[0],c=t[1];return a===n&&c===r}))}},{key:"collision",value:function(e){var t=this.getNextCoord();return!!this.snake.find((function(e){var a=Object(o.a)(e,2),n=a[0],r=a[1];return t[0]===n&&t[1]===r}))&&(this._died=!0)}},{key:"usualStepForward",value:function(e){return this.snake=[this.getNextCoord()].concat(Object(x.a)(this.snake.slice(0,this.snake.length-1))),!0}},{key:"tastyFood",value:function(e){var t;return(null===(t=this.nextCell(e))||void 0===t?void 0:t.type)===b.food&&(this.snake=[this.getNextCoord()].concat(Object(x.a)(this.snake)),!0)}},{key:"collisionOthers",value:function(e){var t=this.nextCell(e);return((null===t||void 0===t?void 0:t.type)===b.snake||(null===t||void 0===t?void 0:t.type)===b.wall)&&(this._died=!0)}},{key:"getNextCoord",value:function(){var e=Object(o.a)(this.snake.slice(0)[0],2),t=e[0],a=e[1],n=180!==Math.abs(this.currentDegree-this.nextDegree);switch(n&&(this.currentDegree=this.nextDegree),n?this.nextDegree:this.currentDegree){case f.Left:return[t,0===a?this.tableSize-1:a-1];case f.Right:return[t,a+1===this.tableSize?0:a+1];case f.Down:return[t+1===this.tableSize?0:t+1,a];case f.Up:return[0===t?this.tableSize-1:t-1,a]}throw new Error("I have no idea how to move this degree o_O: ".concat(this.nextDegree))}},{key:"direction",set:function(e){this.nextDegree=e}},{key:"name",get:function(){return this._name}},{key:"length",get:function(){return this.snake.length}},{key:"died",get:function(){return this._died}},{key:"score",get:function(){return this.steps>0?this.steps:0}}]),t}(I)),B=function(e){function t(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(w.a)(this,t),(a=Object(C.a)(this,Object(S.a)(t).call(this))).lastDinnerTime=void 0,a.tableSize=void 0,a.dinnerRefreshSeconds=7,a.tableSize=e,a.lastDinnerTime=n,a}return Object(D.a)(t,e),Object(E.a)(t,[{key:"reduceForward",value:function(e){return this.secondsFromLastDinner()>this.dinnerRefreshSeconds?(this.dinnerTime(),this.localState={cells:[{coordinate:this.randomCoordinate(this.tableSize),type:b.food,color:m}]}):this.localState}},{key:"reduceBackward",value:function(e){return 2===this.findCellsByCoord(e.cells,this.localState.cells[0].coordinate).length&&this.moreFoooood(),e}},{key:"dinnerTime",value:function(){this.lastDinnerTime=(new Date).getTime()/1e3}},{key:"secondsFromLastDinner",value:function(){return this.secondsFromUnixEpoch()-this.lastDinnerTime}},{key:"moreFoooood",value:function(){this.lastDinnerTime=0}},{key:"dinnerEachSeconds",get:function(){return this.dinnerRefreshSeconds}}]),t}(I),_=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;Object(w.a)(this,e),this.defaultState={cells:[]},this.size=void 0,this.state=this.defaultState,this.snakes=[],this.food=[],this.size=t,this.reset()}return Object(E.a)(e,[{key:"reset",value:function(){var e=[Math.trunc(this.size/2),Math.trunc(this.size/2)];this.snakes=[new M({name:"My smart snake",snake:[[e[0],e[1]+1],[e[0],e[1]],[e[0],e[1]-1]],tableSize:this.size})],this.food=[new B(this.size)]}},{key:"tick",value:function(){var e=Array.apply(void 0,Object(x.a)(this.food).concat(Object(x.a)(this.snakes)));return this.state=this.reduce(e,this.reduce(e,this.defaultState),!1),this.cellsToColorTable()}},{key:"reduce",value:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=a?"reduce":"reduceRight";return e[n]((function(e,t){return t.reducer(e,a)}),t)}},{key:"cellsToColorTable",value:function(){var e=this,t=Array(this.size).fill([]).map((function(){return Array(e.size).fill("")}));return this.state.cells.forEach((function(e){var a=Object(o.a)(e.coordinate,2),n=a[0],r=a[1],c=e.color;return t[n][r]=c})),t}},{key:"cells",get:function(){return this.cellsToColorTable()}},{key:"direction",set:function(e){this.snakes[0].direction=e}},{key:"gameOver",get:function(){return 0===this.snakes.length||this.snakes.filter((function(e){return e.died})).length===this.snakes.length}},{key:"score",get:function(){return this.snakes[0].score}},{key:"stepsLeft",get:function(){return this.snakes[0].stepsLeft}}]),e}()),U={table:Object(s.a)({width:"100%",height:"100%"},"borderCollapse","inherit")},W=Object(l.a)(U)((function(e){var t=e.classes,a=e.rows;return c.a.createElement("table",{className:t.table},c.a.createElement("tbody",null,a.map((function(e,t){return c.a.createElement("tr",{key:"row-id-".concat(t)},e.map((function(e,t){return c.a.createElement("td",{key:"cell-id-".concat(t),className:"cell",style:{backgroundColor:e,border:"1px dashed #ffffff21"}})})))}))))})),G=a(24),P=a.n(G),K=Object(l.a)({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",margin:"auto"},wrappedMobile:{display:"inherit"},container:{margin:"0 auto"}})((function(e){var t=e.classes,a=e.children,n=e.isMobile;return c.a.createElement("div",{className:P()(t.wrapper,Object(s.a)({},t.wrappedMobile,n))},c.a.createElement("div",{className:t.container},a))})),q={btn:Object(s.a)({display:"inline-block",minWidth:270,margin:"0.4em",padding:"0.7em 3em",fontWeight:400,fontSize:30,backgroundColor:"transparent",border:"4px solid transparent",borderImage:"linear-gradient(to right, #add356 0%, #00dfa6 100%)",borderImageSlice:1,backgroundClip:"border-box",cursor:"pointer"},"textAlign","center"),green:{borderImageSlice:1,borderImage:"linear-gradient(to right, #add356 0%, #00dfa6 100%)"},greenButtonText:{background:"-webkit-linear-gradient(left, #add356, #00dfa6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},orange:{borderImageSlice:1,borderImage:"linear-gradient(to right, #ffcb52 0%, #ff451f 100%)"},orangeButtonText:{background:"-webkit-linear-gradient(left, #ffcb52, #ff451f)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},blue:{borderImageSlice:1,borderImage:"linear-gradient(to right, #3dade9 0%, #bf2fcb 100%)"},blueButtonText:{background:"-webkit-linear-gradient(left, #3dade9, #bf2fcb)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},H=Object(l.a)(q)((function(e){var t=e.children,a=e.classes,n=e.color,i=e.onClick,o=Object(r.useCallback)((function(){return i()}),[i]),s="".concat(a.btn," ").concat(a[n]),l=a["".concat(n,"ButtonText")];return c.a.createElement("button",{className:s,onClick:o},c.a.createElement("p",{className:l},t))})),J={container:(p={height:"100%",top:0,left:0,fontSize:"xx-large",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%",cursor:"default"},Object(s.a)(p,"textAlign","center"),Object(s.a)(p,"position","fixed"),p),article:{marginTop:"1em"},text:(g={top:"47%",color:"white"},Object(s.a)(g,"position","relative"),Object(s.a)(g,"textAlign","center"),g),title:{fontSize:70,marginBottom:"0.2em"},score:{fontSize:40},description:{marginTop:"1.5em",fontSize:25}},Y=Object(l.a)(J)((function(e){var t=e.classes,a=e.score,i=e.state,o=e.start,s=e.reset,l=Object(r.useCallback)((function(){return o()}),[o]),u=Object(r.useCallback)((function(){return s()}),[s]);return c.a.createElement("div",{className:t.container},c.a.createElement(K,null,c.a.createElement("div",{className:"".concat(t.text," ").concat(t.title)},i===n.ready?"Hi there!":null,i===n.pause?"Pause":null,i===n.gameOver?"You los'":null),i===n.pause||i===n.gameOver?c.a.createElement("div",{className:"".concat(t.text," ").concat(t.score)},"Score: ",a):null,c.a.createElement("article",{className:t.article},i===n.ready||i===n.pause?c.a.createElement(H,{onClick:l,color:"green"},i===n.ready?"Start":"Continue"):null,i===n.gameOver||i===n.pause?c.a.createElement(H,{onClick:u,color:i===n.pause?"blue":"orange"},i===n.pause?"New Game":"Try again"):null),c.a.createElement("div",{className:"".concat(t.text," ").concat(t.description)},i===n.ready?' Press the button or "space" to start':null,i===n.pause?' Press "space" to continue or "R" to restart':null,i===n.gameOver?' Press the button or "space" to restart':null)))})),Q={paper:(O={"@media (orientation: landscape)":{width:"75vh",height:"75vh"},"@media (orientation: portrait)":{width:"75vw",height:"75vw"},"@media only screen and (max-device-width: 480px)":{width:"100vw",height:"100vw"},backgroundColor:"#fd9170",borderRadius:12},Object(s.a)(O,"position","relative"),Object(s.a)(O,"boxShadow","0 1px 4px rgba(0, 0, 0, 0.3), 0 0 20px rgba(0, 0, 0, 0.1) inset"),Object(s.a)(O,"&::before",(k={},Object(s.a)(k,"position","absolute"),Object(s.a)(k,"content","open-quote"),Object(s.a)(k,"top",100),Object(s.a)(k,"bottom",5),Object(s.a)(k,"left",30),Object(s.a)(k,"right",30),Object(s.a)(k,"zIndex",-1),Object(s.a)(k,"boxShadow","0 0 40px 13px #848484;"),Object(s.a)(k,"borderRadius","100px/20px"),k)),Object(s.a)(O,"&::after",(v={},Object(s.a)(v,"position","absolute"),Object(s.a)(v,"content","open-quote"),Object(s.a)(v,"top",100),Object(s.a)(v,"bottom",5),Object(s.a)(v,"left",30),Object(s.a)(v,"right",30),Object(s.a)(v,"zIndex",-1),Object(s.a)(v,"boxShadow","0 0 40px 13px #848484;"),Object(s.a)(v,"borderRadius","100px/20px"),v)),O),content:{border:"2px dashed #F7EEEE",borderRadius:5,height:"calc(100% - 4px - ".concat(30,"px - ").concat(30,"px)"),width:"calc(100% - 4px - ".concat(30,"px - ").concat(30,"px)"),margin:30,display:"inline-block"}},V=Object(l.a)(Q)((function(e){var t=e.classes,a=e.children;return c.a.createElement("div",{className:t.paper},c.a.createElement("div",{className:t.content},a))})),X={container:{display:"flex",margin:"0px 30px 10px",justifyContent:"space-between"},text:(j={padding:6,font:"900 25px/1 'Source Sans Pro', Arial, sans-serif"},Object(s.a)(j,"textTransform","uppercase"),Object(s.a)(j,"color","#fff"),Object(s.a)(j,"backgroundColor","#fb8f6e"),j)},Z=Object(l.a)(X)((function(e){var t=e.classes,a=e.score,n=e.stepsLeft;return c.a.createElement("div",{className:t.container},c.a.createElement("p",{className:t.text},"Score: ",a>=0?a:0),c.a.createElement("p",{className:t.text},"Steps left: ",n))})),$=Object(l.a)({btn:{}})((function(e){var t=e.children,a=(e.classes,e.onClick),n=Object(r.useCallback)((function(){return a()}),[a]);return c.a.createElement("div",{className:"toggle"},c.a.createElement("input",{onClick:n,type:"checkbox"}),c.a.createElement("span",{className:"button"}),c.a.createElement("span",{className:"label"},t))})),ee={container:(y={display:"flex"},Object(s.a)(y,"flexDirection","column"),Object(s.a)(y,"alignItems","center"),y),row:{display:"flex"}},te=Object(l.a)(ee)((function(e){var t=e.classes,a=e.callback,n=Object(r.useCallback)((function(){return a({code:"ArrowUp"})}),[a]),i=Object(r.useCallback)((function(){return a({code:"ArrowLeft"})}),[a]),o=Object(r.useCallback)((function(){return a({code:"ArrowRight"})}),[a]),s=Object(r.useCallback)((function(){return a({code:"ArrowDown"})}),[a]),l=Object(r.useCallback)((function(){return a({code:"Escape"})}),[a]);return c.a.createElement("div",{className:t.container},c.a.createElement("div",{className:t.row},c.a.createElement("div",null),c.a.createElement($,{onClick:n},"Up"),c.a.createElement("div",null)),c.a.createElement("div",{className:t.row},c.a.createElement($,{onClick:i},"Left"),c.a.createElement($,{onClick:l},"Menu"),c.a.createElement($,{onClick:o},"Right")),c.a.createElement("div",{className:t.row},c.a.createElement("div",null),c.a.createElement($,{onClick:s},"Down"),c.a.createElement("div",null)))})),ae={container:Object(s.a)({margin:5,bottom:0},"position","fixed"),link:{textShadow:"1px 1px 1px #656363",textDecoration:"inherit",color:"white"}},ne=Object(l.a)(ae)((function(e){var t=e.classes;return c.a.createElement("div",{className:t.container},c.a.createElement("a",{className:t.link,href:"https://github.com/specialistvlad/snake-mini-game-web",rel:"noopener noreferrer",target:"_blank"},"Project on GitHub"))})),re={container:Object(s.a)({height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},"flexDirection","column"),controls:{display:"none","@media (hover: none) and (pointer: coarse)":{display:"block"}}},ce=Object(l.a)(re)((function(e){var t=e.classes,a=Object(r.useState)(n.ready),i=Object(o.a)(a,2),s=i[0],l=i[1],b=Object(r.useState)(_.cells),f=Object(o.a)(b,2),m=f[0],p=f[1],g=Object(r.useState)(_.score),k=Object(o.a)(g,2),v=k[0],O=k[1],j=Object(r.useState)(_.stepsLeft),y=Object(o.a)(j,2),x=y[0],w=y[1],E=Object(r.useCallback)((function(e){switch((null===e||void 0===e?void 0:e.dir)||(null===e||void 0===e?void 0:e.code)){case"Right":case"ArrowRight":case"KeyD":_.direction=0;break;case"Down":case"ArrowDown":case"KeyS":_.direction=90;break;case"Left":case"ArrowLeft":case"KeyA":_.direction=180;break;case"Up":case"ArrowUp":case"KeyW":_.direction=270;break;case"Space":case"Escape":case"Enter":case"StartGame":_.gameOver&&_.reset(),s===n.running?l(n.pause):l(n.running);break;case"KeyR":case"ResetGame":_.reset(),l(n.running)}}),[s]);Object(u.a)("keydown",E);var C=Object(d.a)({onSwiped:E,preventDefaultTouchmoveEvent:!0,trackMouse:!0});Object(r.useEffect)((function(){var e=setInterval((function(){s===n.running&&p(_.tick()),_.gameOver&&l(n.gameOver),O(_.score),w(_.stepsLeft)}),h.isMobile?250:150);return function(){return clearTimeout(e)}}),[s]);var S=Object(r.useCallback)((function(){return E({code:"StartGame"})}),[E]),D=Object(r.useCallback)((function(){return E({code:"ResetGame"})}),[E]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",Object.assign({className:t.container},C),c.a.createElement("div",null,c.a.createElement(Z,{score:v,stepsLeft:x})),c.a.createElement("div",null,c.a.createElement(V,null,c.a.createElement(W,{rows:m}))),c.a.createElement("div",{className:t.controls},c.a.createElement(te,{callback:E}))),s===n.running?null:c.a.createElement(Y,{state:s,score:v,start:S,reset:D}),c.a.createElement(ne,null))}));Object(i.render)(c.a.createElement(ce,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.52645625.chunk.js.map