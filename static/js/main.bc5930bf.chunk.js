(this["webpackJsonpsnake-mini-game-web"]=this["webpackJsonpsnake-mini-game-web"]||[]).push([[0],{33:function(e,t,n){e.exports=n(58)},34:function(e,t,n){},52:function(e,t){},53:function(e,t){},54:function(e,t){},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t,n){"use strict";n.r(t);n(34);var a,i,r,o=n(1),s=n.n(o),c=n(26),l=n(5),u=n(2),d=n(4),h=n(28),f=n(29),p=n(30);!function(e){e[e.ready=0]="ready",e[e.running=1]="running",e[e.pause=2]="pause",e[e.gameOver=3]="gameOver"}(a||(a={})),function(e){e[e.empty=0]="empty",e[e.wall=1]="wall",e[e.food=2]="food",e[e.snake=3]="snake",e[e.snakeHead=4]="snakeHead",e[e.poison=5]="poison"}(i||(i={})),function(e){e[e.Right=0]="Right",e[e.Down=90]="Down",e[e.Left=180]="Left",e[e.Up=270]="Up"}(r||(r={}));var b=n(8),m=n(6),v=n(7),g=n(9),k=n(10),y=n(13),w=function(){function e(){Object(m.a)(this,e),this.defaultState={cells:[],reward:0,fruitEaten:0,done:!1},this.localState=this.defaultState}return Object(v.a)(e,[{key:"reduceForward",value:function(e){throw new Error("Must be implemented!")}},{key:"reduceBackward",value:function(e){return e}},{key:"reducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultState,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!n&&t&&(this.localState=this.reduceForward(e)),n||t?Object(y.a)({},e,{},this.localState,{cells:[].concat(Object(b.a)(e.cells),Object(b.a)(this.localState.cells))}):this.reduceBackward(e)}},{key:"random",value:function(e){return Math.floor(Math.random()*e)}},{key:"indexToCoordinate",value:function(e,t){return[Math.trunc(e/t),Math.trunc(e%t)]}},{key:"secondsFromUnixEpoch",value:function(){return Date.now()/1e3}},{key:"randomCoordinate",value:function(e){return[this.random(e),this.random(e)]}},{key:"findCellsByCoord",value:function(e,t){var n=Object(l.a)(t,2),a=n[0],i=n[1];return e.filter((function(e){var t=e.coordinate;e.type;return t[0]===a&&t[1]===i}))}}]),e}(),O=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).stepsLeftToDecreaseLength=10,e.stepsForEachFood=10,e}return Object(v.a)(n,[{key:"step",value:function(e){this.collision(e)||this.collisionOthers(e)||this.tastyFood(e)||this.looseLength(e)||this.disgustingPoison(e)||this.usualStepForward(e)}},{key:"looseLength",value:function(e){return this.stepsLeftToDecreaseLength--,0===this.stepsLeftToDecreaseLength&&(this._snake.length>=2?(this.stepsLeftToDecreaseLength=this.stepsForEachFood,this._snake=[this.getNextCoord()].concat(Object(b.a)(this._snake.slice(0,this._snake.length-2))),this._reward=this.rewards.step,!0):(this.die(),!0))}},{key:"tastyFood",value:function(e){var t;return(null===(t=this.nextCell(e))||void 0===t?void 0:t.type)===i.food&&(this.stepsLeftToDecreaseLength=this.stepsForEachFood,this._snake=[this.getNextCoord()].concat(Object(b.a)(this._snake)),this._foodEaten=1,this._reward=this.rewards.food,!0)}},{key:"stepsLeft",get:function(){return(this._snake.length-1)*this.stepsForEachFood+this.stepsLeftToDecreaseLength}}]),n}(function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(e){var a,i,o,s,c;return Object(m.a)(this,n),(c=t.call(this))._name=void 0,c._died=!1,c._snake=void 0,c.currentDirection=void 0,c.nextDirection=void 0,c.steps=-1,c.tableSize=void 0,c._foodEaten=0,c._reward=0,c.rewards=void 0,c._name=e.name||"My hero snake",c._snake=e.snake,c.currentDirection=e.direction||r.Right,c.nextDirection=c.currentDirection,c.tableSize=e.tableSize||100,c.rewards={step:(null===(a=e.rewards)||void 0===a?void 0:a.step)||-.2,food:(null===(i=e.rewards)||void 0===i?void 0:i.food)||10,poison:(null===(o=e.rewards)||void 0===o?void 0:o.poison)||-2,death:(null===(s=e.rewards)||void 0===s?void 0:s.death)||-10},c}return Object(v.a)(n,[{key:"die",value:function(){this._died=!0,this._reward=this.rewards.death}},{key:"reduceForward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||this._died||(this.steps>=0&&this.step(e.cells),this.steps++),Object(y.a)({},e,{cells:this._snake.map((function(e,t){return{coordinate:e,type:0===t?i.snakeHead:i.snake}}))})}},{key:"step",value:function(e){this._foodEaten=0,this._reward=0,this.collision(e)||this.collisionOthers(e)||this.tastyFood(e)||this.disgustingPoison(e)||this.usualStepForward(e)}},{key:"nextCell",value:function(e){var t=this.getNextCoord(),n=Object(l.a)(t,2),a=n[0],i=n[1];return e.find((function(e){var t=Object(l.a)(e.coordinate,2),n=t[0],r=t[1];return n===a&&r===i}))}},{key:"collision",value:function(e){var t=this.getNextCoord();return!!this._snake.find((function(e){var n=Object(l.a)(e,2),a=n[0],i=n[1];return t[0]===a&&t[1]===i}))&&(this.die(),!0)}},{key:"usualStepForward",value:function(e){return this._snake=[this.getNextCoord()].concat(Object(b.a)(this._snake.slice(0,this._snake.length-1))),this._reward=this.rewards.step,!0}},{key:"tastyFood",value:function(e){var t;return(null===(t=this.nextCell(e))||void 0===t?void 0:t.type)===i.food&&(this._snake=[this.getNextCoord()].concat(Object(b.a)(this._snake)),this._foodEaten=1,this._reward=this.rewards.food,!0)}},{key:"disgustingPoison",value:function(e){var t;return(null===(t=this.nextCell(e))||void 0===t?void 0:t.type)===i.poison&&(this._snake=[this.getNextCoord()].concat(Object(b.a)(this._snake.slice(0,this._snake.length-1))),this._reward=this.rewards.poison,!0)}},{key:"collisionOthers",value:function(e){var t=this.nextCell(e);return((null===t||void 0===t?void 0:t.type)===i.snake||(null===t||void 0===t?void 0:t.type)===i.snakeHead||(null===t||void 0===t?void 0:t.type)===i.wall)&&(this.die(),!0)}},{key:"getNextCoord",value:function(){var e=Object(l.a)(this._snake.slice(0)[0],2),t=e[0],n=e[1],a=180!==Math.abs(this.currentDirection-this.nextDirection);switch(a&&(this.currentDirection=this.nextDirection),a?this.nextDirection:this.currentDirection){case r.Left:return[t,0===n?this.tableSize-1:n-1];case r.Right:return[t,n+1===this.tableSize?0:n+1];case r.Down:return[t+1===this.tableSize?0:t+1,n];case r.Up:return[0===t?this.tableSize-1:t-1,n]}throw new Error("I have no idea how to move this angle o_O: ".concat(this.nextDirection))}},{key:"direction",set:function(e){this.nextDirection=e}},{key:"name",get:function(){return this._name}},{key:"length",get:function(){return this._snake.length}},{key:"points",get:function(){return this._snake.slice()}},{key:"reward",get:function(){return this._reward}},{key:"foodEaten",get:function(){return this._foodEaten}},{key:"died",get:function(){return this._died}},{key:"score",get:function(){return this.steps>0?this.steps:0}}]),n}(w)),j=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(e){var a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1/0,1/0];return Object(m.a)(this,n),(a=t.call(this)).tableSize=void 0,a.lastDinnerTime=void 0,a.dinnerRefreshSeconds=7,a.point=void 0,a.tableSize=e,a.lastDinnerTime=i,a.point=r,a}return Object(v.a)(n,[{key:"reduceForward",value:function(e){return this.secondsFromLastDinner()>this.dinnerRefreshSeconds?(this.dinnerTime(),this.point=this.randomCoordinate(this.tableSize),this.localState=Object(y.a)({},e,{cells:[{coordinate:this.point,type:i.food}]})):this.localState}},{key:"reduceBackward",value:function(e){return this.localState.cells[0]?(this.foodEaten(e)&&this.moreFoooood(),e):e}},{key:"dinnerTime",value:function(){this.lastDinnerTime=(new Date).getTime()/1e3}},{key:"foodEaten",value:function(e){return 2===this.findCellsByCoord(e.cells,this.localState.cells[0].coordinate).length}},{key:"secondsFromLastDinner",value:function(){return this.secondsFromUnixEpoch()-this.lastDinnerTime}},{key:"moreFoooood",value:function(){this.lastDinnerTime=0}},{key:"dinnerEachSeconds",get:function(){return this.dinnerRefreshSeconds}},{key:"points",get:function(){return this.point}}]),n}(w),x={cells:[],reward:0,fruitEaten:0,done:!1},E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1?arguments[1]:void 0;Object(m.a)(this,e),this.size=void 0,this.fullSize=void 0,this.snakes=[],this.food=[],this._state=x,this._cellsForView=[],this.opts=void 0,this.opts=n||{},this.size=t,this.fullSize=t*t,this.reset(),this._cellsForView=this.makeCellsForView()}return Object(v.a)(e,[{key:"reset",value:function(){var e=[Math.trunc(this.size/2),Math.trunc(this.size/2)];this.snakes=this.opts.snakes?this.opts.snakes:[new O({name:"My smart snake",snake:[[e[0],2],[e[0],1],[e[0],0]],tableSize:this.size})],this.food=this.opts.food?this.opts.food:[new j(this.size)]}},{key:"tick",value:function(){var e=Array.apply(void 0,Object(b.a)(this.food).concat(Object(b.a)(this.snakes)));return this._state=this.reduce(e,this.reduce(e,x),!1),this._cellsForView=this.makeCellsForView(),this._cellsForView}},{key:"step",value:function(e){return this.direction=e,this.tick(),{cells:this._state.cells,reward:this.snakes[0].reward||0,fruitEaten:this.snakes[0].foodEaten||0,done:this.gameOver}}},{key:"reduce",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=n?"reduce":"reduceRight";return e[a]((function(e,t){return t.reducer(e,n)}),t)}},{key:"makeEmptyCellsForView",value:function(){return this._cellsForView=Array(this.fullSize).fill(i.empty)}},{key:"indexToCoordinate",value:function(e,t){return[Math.trunc(e/t),Math.trunc(e%t)]}},{key:"coordinateToIndex",value:function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return n*this.size+a}},{key:"makeCellsForView",value:function(){var e=this;if(0===this._cellsForView.length)return this._cellsForView=this.makeEmptyCellsForView();var t=function(e){return Object.keys(i).indexOf(e.toString())},n=this._state.cells.sort((function(n,a){if(e.coordinateToIndex(n.coordinate)<e.coordinateToIndex(a.coordinate))return 1;if(e.coordinateToIndex(n.coordinate)>e.coordinateToIndex(a.coordinate))return-1;if(e.coordinateToIndex(n.coordinate)===e.coordinateToIndex(a.coordinate))return t(n.type)<t(a.type)?1:t(n.type)>t(a.type)?-1:0;throw new Error("Imposible")}));return this._cellsForView=this.makeEmptyCellsForView().map((function(t,a){var r,o=e.indexToCoordinate(a,e.size),s=Object(l.a)(o,2),c=s[0],u=s[1];return(null===(r=n.find((function(e){var t=Object(l.a)(e.coordinate,2),n=t[0];return t[1]===u&&n===c})))||void 0===r?void 0:r.type)||i.empty}))}},{key:"cells",get:function(){return this._cellsForView}},{key:"direction",set:function(e){this.snakes[0].direction=e}},{key:"gameOver",get:function(){return 0===this.snakes.length||this.snakes.filter((function(e){return e.died})).length===this.snakes.length}},{key:"score",get:function(){return this.snakes[0].score}},{key:"stepsLeft",get:function(){return this.snakes[0].stepsLeft}},{key:"state",get:function(){return this._state}},{key:"getState",get:function(){return{cells:this._state.cells,reward:this.snakes[0].reward||0,fruitEaten:this.snakes[0].foodEaten||0,done:this.gameOver}}}]),e}(),S=n(14),C=n.n(S),_=n(21),T=n(12),F=n(32),z=n(15),D=function(e){Object(k.a)(n,e);var t=Object(g.a)(n);function n(e,a){var i;return Object(m.a)(this,n),(i=t.call(this,e)).modelUrl=void 0,i.sideSize=void 0,i._ready=!1,i.sideSize=e,i.modelUrl=a,i}return Object(v.a)(n,[{key:"loadModel",value:function(){var e=Object(_.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.c(this.modelUrl);case 2:return this.model=e.sent,this._ready=!0,this.warm(),e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){if(!this._ready)throw new Error("Agent is not ready to predict yet");return Object(F.a)(Object(T.a)(n.prototype),"predict",this).call(this,e)}},{key:"ready",get:function(){return this._ready}}]),n}(function(){function e(t){Object(m.a)(this,e),this.sideSize=void 0,this.model=void 0,this.actions=[r.Right,r.Down,r.Left,r.Up],this.sideSize=t,this.model=new z.a}return Object(v.a)(e,[{key:"predict",value:function(e){var t=this,n=z.d((function(){return t.model.predict(t.gameStatesToTensor([e]))})).argMax(-1).dataSync()[0];return this.directionByIndex(n)}},{key:"warm",value:function(){var e=Object(_.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.predict(x);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gameStatesToTensor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=z.b([e.length,this.sideSize,this.sideSize,2]);return e.forEach((function(e,n){e.cells.forEach((function(e){var a=e.coordinate,r=e.type;return t.set(r===i.snake||r===i.snakeHead?r-2:r-1,n,a[0],a[1],r===i.snake||r===i.snakeHead?0:1)}))})),t.toTensor()}},{key:"directionByIndex",value:function(e){return this.actions[e]}}]),e}()),N=new E(5),L=new D(5,"/snake-mini-game-web/model/model.json"),M=function(e){var t=e.cellType;return s.a.createElement("div",{className:"cell-type-".concat(t.toString())})},I=Object(o.memo)(M);M.whyDidYouRender=!0;var R,B,V,A,H,P,U=Object(o.memo)(Object(d.a)({container:{width:"100%",height:"100%",border:"2px dashed #F7EEEE",borderRadius:5,display:"grid",gridColumnGap:0,gridRowGap:0}})((function(e){var t=e.classes,n=e.cells;return s.a.createElement("div",{className:"table-css-grid-container ".concat(t.container),style:{gridTemplateColumns:"repeat(".concat(Math.sqrt(n.length),", 1fr)"),gridTemplateRows:"repeat(".concat(Math.sqrt(n.length),", 1fr)")}},n.map((function(e,t){return s.a.createElement(I,{key:t,cellType:e})})))}))),W=n(31),G=n.n(W),K=Object(d.a)({wrapper:{display:"flex",justifyContent:"center",alignItems:"center",width:"100vw",height:"100vh",margin:"auto"},wrappedMobile:{display:"inherit"},container:{margin:"0 auto"}})((function(e){var t=e.classes,n=e.children,a=e.isMobile;return s.a.createElement("div",{className:G()(t.wrapper,Object(u.a)({},t.wrappedMobile,a))},s.a.createElement("div",{className:t.container},n))})),q={btn:Object(u.a)({display:"inline-block",minWidth:270,margin:"0.4em",padding:"0.7em 3em",fontWeight:400,fontSize:30,backgroundColor:"transparent",border:"4px solid transparent",borderImage:"linear-gradient(to right, #add356 0%, #00dfa6 100%)",borderImageSlice:1,backgroundClip:"border-box",cursor:"pointer"},"textAlign","center"),green:{borderImageSlice:1,borderImage:"linear-gradient(to right, #add356 0%, #00dfa6 100%)"},greenButtonText:{background:"-webkit-linear-gradient(left, #add356, #00dfa6)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},orange:{borderImageSlice:1,borderImage:"linear-gradient(to right, #ffcb52 0%, #ff451f 100%)"},orangeButtonText:{background:"-webkit-linear-gradient(left, #ffcb52, #ff451f)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},blue:{borderImageSlice:1,borderImage:"linear-gradient(to right, #3dade9 0%, #bf2fcb 100%)"},blueButtonText:{background:"-webkit-linear-gradient(left, #3dade9, #bf2fcb)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},J=Object(d.a)(q)((function(e){var t=e.children,n=e.classes,a=e.color,i=e.onClick,r=Object(o.useCallback)((function(){return i()}),[i]),c="".concat(n.btn," ").concat(n[a]),l=n["".concat(a,"ButtonText")];return s.a.createElement("button",{className:c,onClick:r},s.a.createElement("p",{className:l},t))})),Y={container:(R={height:"100%",top:0,left:0,fontSize:"xx-large",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%",cursor:"default"},Object(u.a)(R,"textAlign","center"),Object(u.a)(R,"position","fixed"),R),article:{marginTop:"1em"},text:(B={top:"47%",color:"white"},Object(u.a)(B,"position","relative"),Object(u.a)(B,"textAlign","center"),B),title:{fontSize:70,marginBottom:"0.2em"},score:{fontSize:40},description:{marginTop:"1.5em",fontSize:25}},Q=Object(d.a)(Y)((function(e){var t=e.classes,n=e.score,i=e.state,r=e.start,c=e.reset,l=Object(o.useCallback)((function(){return r()}),[r]),u=Object(o.useCallback)((function(){return c()}),[c]);return s.a.createElement("div",{className:t.container},s.a.createElement(K,null,s.a.createElement("div",{className:"".concat(t.text," ").concat(t.title)},i===a.ready?"Hi there!":null,i===a.pause?"Pause":null,i===a.gameOver?"You lose":null),i===a.pause||i===a.gameOver?s.a.createElement("div",{className:"".concat(t.text," ").concat(t.score)},"Score: ",n):null,s.a.createElement("article",{className:t.article},i===a.ready||i===a.pause?s.a.createElement(J,{onClick:l,color:"green"},i===a.ready?"Start":"Continue"):null,i===a.gameOver||i===a.pause?s.a.createElement(J,{onClick:u,color:i===a.pause?"blue":"orange"},i===a.pause?"New Game":"Try again"):null),s.a.createElement("div",{className:"".concat(t.text," ").concat(t.description)},i===a.ready?' Press the button or "space" to start':null,i===a.pause?' Press "space" to continue or "R" to restart':null,i===a.gameOver?' Press the button or "space" to restart':null)))})),X={paper:(H={"@media (orientation: landscape)":{width:"75vh",height:"75vh"},"@media (orientation: portrait)":{width:"75vw",height:"75vw"},"@media only screen and (max-device-width: 720px)":{width:"100vw",height:"100vw"},backgroundColor:"#fd9170",borderRadius:12},Object(u.a)(H,"position","relative"),Object(u.a)(H,"boxShadow","0 1px 4px rgba(0, 0, 0, 0.3), 0 0 20px rgba(0, 0, 0, 0.1) inset"),Object(u.a)(H,"&::before",(V={},Object(u.a)(V,"position","absolute"),Object(u.a)(V,"content","open-quote"),Object(u.a)(V,"top",100),Object(u.a)(V,"bottom",5),Object(u.a)(V,"left",30),Object(u.a)(V,"right",30),Object(u.a)(V,"zIndex",-1),Object(u.a)(V,"boxShadow","0 0 40px 13px #848484;"),Object(u.a)(V,"borderRadius","100px/20px"),V)),Object(u.a)(H,"&::after",(A={},Object(u.a)(A,"position","absolute"),Object(u.a)(A,"content","open-quote"),Object(u.a)(A,"top",100),Object(u.a)(A,"bottom",5),Object(u.a)(A,"left",30),Object(u.a)(A,"right",30),Object(u.a)(A,"zIndex",-1),Object(u.a)(A,"boxShadow","0 0 40px 13px #848484;"),Object(u.a)(A,"borderRadius","100px/20px"),A)),H),content:{height:"calc(100% - 4px - ".concat(30,"px - ").concat(30,"px)"),width:"calc(100% - 4px - ".concat(30,"px - ").concat(30,"px)"),margin:"".concat(30,"px"),display:"inline-block"}},Z=Object(d.a)(X)((function(e){var t=e.classes,n=e.children;return s.a.createElement("div",{className:t.paper},s.a.createElement("div",{className:t.content},n))})),$={container:{display:"flex",marginTop:5,justifyContent:"space-evenly",width:"100%"},text:(P={padding:6,font:"900 25px/1 'Source Sans Pro', Arial, sans-serif"},Object(u.a)(P,"textTransform","uppercase"),Object(u.a)(P,"color","#fff"),Object(u.a)(P,"backgroundColor","#fb8f6e"),P),menu:{backgroundColor:"rgb(251, 143, 110)",zoom:1,fill:"white",height:37,width:37,"&:hover":{backgroundColor:"rgb(253, 174, 150)"}}},ee=Object(d.a)($)((function(e){var t=e.classes,n=e.score,a=e.stepsLeft,i=e.pause,r=Object(o.useCallback)((function(){return i()}),[i]);return s.a.createElement("div",{className:t.container,onClick:r},s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t.menu,height:"24",viewBox:"0 0 24 24",width:"24"},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})),s.a.createElement("p",{className:t.text},"Score: ",n>=0?n:0),s.a.createElement("p",{className:t.text},"Steps left: ",a))})),te={container:Object(u.a)({margin:5,bottom:0},"position","fixed"),link:{textShadow:"1px 1px 1px #656363",textDecoration:"inherit",color:"white"}},ne=Object(d.a)(te)((function(e){var t=e.classes;return s.a.createElement("div",{className:t.container},s.a.createElement("a",{className:t.link,href:"https://github.com/specialistvlad/snake-mini-game-web",rel:"noopener noreferrer",target:"_blank"},"Project on GitHub"))})),ae=Object(o.memo)(Object(d.a)({container:{marginTop:10,marginBottom:10},input:{},label:{}})((function(e){var t=e.classes,n=e.children,a=e.checked,i=e.onChange;return s.a.createElement("div",{className:t.container},s.a.createElement("input",{className:t.input,type:"checkbox",name:"autoPlay",value:a?"true":"",defaultChecked:a,onClick:Object(o.useCallback)((function(e){return i(!Boolean(e.target.value))}),[i])}),s.a.createElement("label",{className:t.label,htmlFor:"autoPlay"},n))}))),ie={container:Object(u.a)({height:"100%","@media (orientation: landscape)":{width:"75vh"},"@media (orientation: portrait)":{width:"75vw"},"@media only screen and (max-device-width: 720px)":{width:"100vw"},display:"flex",justifyContent:"center",alignItems:"center",margin:"auto"},"flexDirection","column")},re=Object(d.a)(ie)((function(e){var t=e.classes,n=Object(o.useState)(a.ready),i=Object(l.a)(n,2),r=i[0],c=i[1],u=Object(o.useState)(N.cells),d=Object(l.a)(u,2),b=d[0],m=d[1],v=Object(o.useState)(N.score),g=Object(l.a)(v,2),k=g[0],y=g[1],w=Object(o.useState)(N.stepsLeft),O=Object(l.a)(w,2),j=O[0],x=O[1],E=Object(o.useState)(!0),S=Object(l.a)(E,2),C=S[0],_=S[1],T=Object(o.useCallback)((function(e){switch((null===e||void 0===e?void 0:e.dir)||(null===e||void 0===e?void 0:e.code)){case"Right":case"ArrowRight":case"KeyD":N.direction=0;break;case"Down":case"ArrowDown":case"KeyS":N.direction=90;break;case"Left":case"ArrowLeft":case"KeyA":N.direction=180;break;case"Up":case"ArrowUp":case"KeyW":N.direction=270;break;case"Space":case"Escape":case"Enter":case"Menu":case"StartGame":N.gameOver&&N.reset(),r===a.running?c(a.pause):c(a.running);break;case"KeyR":case"ResetGame":N.reset(),c(a.running)}}),[r]);Object(o.useEffect)((function(){C&&L.loadModel()}),[C]),Object(h.a)("keydown",T);var F=Object(f.a)({onSwiped:T,preventDefaultTouchmoveEvent:!0,trackMouse:!0});Object(o.useEffect)((function(){var e=setInterval((function(){r===a.running&&(C?L.ready&&(N.direction=L.predict(N.state),m(N.tick())):m(N.tick())),N.gameOver&&c(a.gameOver),y(N.score),x(N.stepsLeft)}),p.isMobile?350:150);return function(){return clearTimeout(e)}}),[r,b,C]);var z=Object(o.useCallback)((function(){return T({code:"StartGame"})}),[T]),D=Object(o.useCallback)((function(){return T({code:"ResetGame"})}),[T]),M=Object(o.useCallback)((function(){return T({code:"Menu"})}),[T]),I=Object(o.useCallback)((function(e){return _(e)}),[]);return s.a.createElement("div",Object.assign({className:t.container},F),s.a.createElement(ee,{score:k,stepsLeft:j,pause:M}),s.a.createElement(ae,{checked:C,onChange:I},"Allow deep learned network to play automatically"),s.a.createElement(Z,null,s.a.createElement(U,{cells:b})),r===a.running?null:s.a.createElement(Q,{state:r,score:k,start:z,reset:D}),s.a.createElement(ne,null))}));Object(c.render)(s.a.createElement(re,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.bc5930bf.chunk.js.map